<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

	<import resource="cocothemonkey.xml"/>

	<bean id="blackboard" class="com.georgetownsoftware.blackboard.Blackboard" singleton="true">

		<property name="workspaceConfigurationSet">
			<set>
			   	<ref bean="Blackboard.Workspace"/>
				<ref bean="CocoTheMonkey"/>
			</set>
		</property>
	</bean>

	<bean id="errorManager" class="com.georgetownsoftware.blackboard.util.error.ErrorManager"> </bean>


	<!-- These events are used by the blackboard -->
	<bean id="Blackboard.TargetSpaceTimeoutEvent" class="com.georgetownsoftware.blackboard.config.EventConfiguration" singleton="true">
		<property name="name"><value>Blackboard.TargetSpaceTimeoutEvent</value></property>
		<property name="eventClass"><value>com.georgetownsoftware.blackboard.TargetSpaceTimeoutEvent</value></property>
		<property name="workspaceIdentifierName"><value>blackboardWorkspaceName</value></property>
	</bean>

	<!-- These plans are used by the blackboard -->
	<bean id="Blackboard.TargetSpaceTimeoutPlan" class="com.georgetownsoftware.blackboard.TargetSpaceTimeoutPlan" singleton="true">
		<property name="planName"><value>Blackboard.TargetSpaceTimeoutPlan</value></property>
	</bean>

	<!--  This is where the blackboard workspace is defined
		  The  blackboard workspace is a long running workspace hosts
		  plans important to the blackboard function -->
	
	<bean id="Blackboard.Workspace" class="com.georgetownsoftware.blackboard.config.WorkspaceConfiguration" singleton="true">

	   <!-- The name of this workspace -->
	   <property name="name"><value>Blackboard</value></property>

		<!-- This defines the set of events that will cause this workspace to be instantiated.
			 Whenever one of these events arrives on the blackboard, the blackboard looks for an
		     workspace identified by the event's workspace identifier.  If that workspace does not
		     exist the blackboard will create a new one.  The event is then added to the workspace.
		-->
		
		<property name="eventConfigurationSet">
			<set>
				<ref bean="Blackboard.TargetSpaceTimeoutEvent"/>
			</set>
		</property>

		<!--
			 Represents the set of plans that will be assigned to the workspace defined by this
		     configuration.  Plans are expected to be singletons and should NOT preserve state.
		-->
		<property name="planSet">
			<set>
				<ref bean="Blackboard.TargetSpaceTimeoutPlan"/>
			</set>
		</property>
		
		<!--
			 This represents the set of targets that should not be persisted when a
			 workspace is retired.  These targets will be persisted during any intermediary
		     persistence due to a need to maintain blackboard state.

		     NOTE: That this workspace is never retired.  All the plans return false in the isFinished() method
		-->
		<property name="doNotPersistSet">
			<set>
			</set>
		</property>

		<!--
			 Determines whether or not the change information that is collected for each target
		     on the workspace will be persisted whenever the workspace is persisted.  This means
		     that even during persistence to maintain blackboard state change information will
			 NOT be persisted.
		-->
		<property name="persistChangeInfoHistory"><value>false</value></property>

		<!-- If the workspace receives no events and no plans are executed in the specified
			 timeout period then this workspace will be retired.  Set this value to 0 to never
		     have the workspace timeout.
		-->		
		<property name="workspaceTimeoutInSeconds"><value>0</value></property>

	</bean>
	
</beans>